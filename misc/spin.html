<html>
	<head>
		<base href="../">
		<title>ksgwxfan - Spinner</title>
		<style>
			.HEADER {
				width: 100%;
				font-weight: bold;
				font-size: 30px;
				display: inline-block;
			}
			.HEADERPHOTO {
				width: 3%;
				border: 2px solid white;
				box-shadow: 0px 0px 5px white;
				border-radius: 35%;
				display: inline-block;
			}
			.DISP {
				position: relative;
				white-space: nowrap;
				width: 375px;
				height: 200px;
				border: 5px inset gray;
				background-color: white;
				margin: auto;
				}
			.AMOUNT {
				position: absolute;
				user-select: none;
				color: black;
				transform: translate(-50%,-50%);
				font-size: 110px;
				font-weight: bold;
				top: 50%;
				left: 50%;
				
			}
		</style>
	</head>
	<body style="background-color:#141414;color:white;" link="lightBlue" vlink="lightBlue">
		<div class="HEADER">
			<img class="HEADERPHOTO" src="profile.png"> <u>"Spin" Wheel</u>
		</div><br><br>
		<div id="pretext" style="width:85%;margin: 0 auto;">Welcome.<br><br></div>
		<div id="display" class="DISP" onClick=chg()>
			<div id="amt" class="AMOUNT"><font style="font-size:80px;">$ </font>5000
			</div>
		</div><br><br>
		<button id="spinner" style="margin:auto;display:block;" onClick=spin()>SPIN</button><br><br>
		<span id="i_tot">Index Total</span><br><br>
		<span id="r">R</span><br><br>
		<span id="ind">I</span>



		<br><br><br><br><iframe src="footer.html" style="border:none;width:100%;height:40px;"></iframe>
		<script>
			// green: Lime
			// orchid: Magenta
			// orange: OrangeRed
			// Yellow: Yellow
			// Red: Red
			// teal: Blue
			// light pink: DarkSalmon
			// White: White;
			// Define Amounts ($) and colors
			var prices = [];
			prices.push(['<font style="font-size:80px;">$ </font>5000',"White"]);
			prices.push(['<font style="font-size:80px;">$ </font>600',"Lime"]);
			prices.push(['<font style="font-size:80px;">$ </font>500',"Yellow"]);
			prices.push(['<font style="font-size:80px;">$ </font>300',"Red"]);
			prices.push(['<font style="font-size:80px;">$ </font>500',"Blue"]);
			prices.push(['<font style="font-size:80px;">$ </font>800',"OrangeRed"]);
			prices.push(['<font style="font-size:80px;">$ </font>550',"Magenta"]);
			prices.push(['<font style="font-size:80px;">$ </font>400',"Yellow"]);
			prices.push(['<font style="font-size:80px;">$ </font>300',"DarkSalmon"]);
			prices.push(['<font style="font-size:80px;">$ </font>900',"Red"]);
			prices.push(['<font style="font-size:80px;">$ </font>500',"Blue"]);
			prices.push(['<font style="font-size:80px;">$ </font>300',"Lime"]);
			prices.push(['<font style="font-size:80px;">$ </font>900',"DarkSalmon"]);
			prices.push(['<font style="font-size:80px;">Bankrupt</font>',"Black"]);
			prices.push(['<font style="font-size:80px;">$ </font>600',"Magenta"]);
			prices.push(['<font style="font-size:80px;">$ </font>400',"Yellow"]);
			prices.push(['<font style="font-size:80px;">$ </font>300',"Blue"]);
			prices.push(['<font style="font-size:80px;">LOST TURN</font>',"White"]);
			prices.push(['<font style="font-size:80px;">$ </font>800',"Red"]);
			prices.push(['<font style="font-size:80px;">$ </font>350',"Magenta"]);
			prices.push(['<font style="font-size:80px;">$ </font>450',"DarkSalmon"]);
			prices.push(['<font style="font-size:80px;">$ </font>700',"Lime"]);
			prices.push(['<font style="font-size:80px;">$ </font>300',"Yellow"]);
			prices.push(['<font style="font-size:80px;">$ </font>600',"Magenta"]);

			var min = Math.floor(prices.length * 0.8);
			var max = Math.floor(prices.length * 4.5);
			var r;
			var curri = 0;
			
			// Sleep code source: https://stackoverflow.com/a/39914235
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}
			
			// await sleep code source: https://stackoverflow.com/a/39914235
			async function spin() {
				// Ex: for a number between 8 and 40: r = min + floor(random * (min + max-1))
				r = Math.floor(Math.random() * (min + max - 1));
				document.getElementById("r").innerHTML = r;
				document.getElementById("i_tot").innerHTML = prices.length;
				
				var t_i = 0.1;	// Time initial interval
				var t = t_i;
				
				for( i=0; i <= r; i++) {
					if (curri == prices.length - 1) {curri = 0;}
					else {curri += 1;}
					document.getElementById("ind").innerHTML = curri;
					setTimeout(chg, Math.pow(t * 1000,0.5));
					await sleep(Math.pow(t * 1000,0.2));
					t += t_i;		
				}
				
			}
			
			function chg() {
				if (curri == 17) {document.getElementById("display").style.whiteSpace = "normal";}
				else {document.getElementById("display").style.whiteSpace = "nowrap";}
				if (prices[curri][1] == "Black") {document.getElementById("amt").style.color = "White";}
				else {document.getElementById("amt").style.color = "Black";}
				document.getElementById("amt").innerHTML = prices[curri][0];
				document.getElementById("display").style.backgroundColor = prices[curri][1];
			}
		</script>
	</body>
</html>
